<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/css.css">
        <link rel="stylesheet" href="dijit/themes/claro/claro.css">
        <script>dojoConfig = {parseOnLoad: true, async: true}</script>
        <script src="dojo/dojo.js"></script>
        <script>
            
            require([
                "dojo/_base/declare", "dojo/parser", "dojo/ready",
                "dijit/_WidgetBase", "dijit/_TemplatedMixin",
                "dijit/_WidgetsInTemplateMixin", "dojo/dom", "dojo/dom-construct", "dojo/query", "dojo/text! myApp/templates/formWidget.html", "dijit/Fieldset", "dijit/form/Form", "dijit/form/TextBox",  "dijit/form/Textarea", "dijit/form/ComboBox", "dijit/form/ValidationTextBox", "dojox/validate/web", "dijit/form/Button", "dijit/form/CheckBox"
            ], function(declare, parser, ready, _WidgetBase, _TemplatedMixin,
            _WidgetsInTemplateMixin, dom, domConstruct, query, template){

                declare("form", [_WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin], { 
                    templateString: template,

                    valid: function(){
                        var ps = query("form label p");
                        for (var i = 0; i < ps.length; i++) {
                            domConstruct.destroy(ps[i]);
                        };
                        var form = dom.byId("myForm");
                        var val = false;
                        var f = document.getElementById("myForm");
                        if(f.email.value ==""){
                            val = false;
                        }else{
                           if(this.emailNode.isValid()&&this.phoneNode.isValid()){
                                val = true;
                            }else{
                                alert('Form contains invalid data.  Please correct first');
                                return false;
                            }
                        }
                        if(f.firstName.value == ""||f.lastName.value == ""|| f.company.value == ""||f.address.value == ""||f.phone.value ==""){
                            val = false;
                        }
                        if(val){
                            return confirm('Form is valid, press OK to submit');
                        }else{
                            var rojos = query("form label.required");
                            for (var i = 0; i < rojos.length; i++) {
                                domConstruct.create("p", {
                                    innerHTML: "*",
                                    style: {
                                        color: "#ff0000"
                                    }
                                }, rojos[i]);
                            }
                            alert('All the elements with the * in red are required');
                            return false;
                        }
                        return true;
                    },

                    postCreate: function(){
                        
                        var legendspan = query("legend .dijitInline.dijitArrowNode");
                        var legend1 = query("#othersfields legend")[0];
                        var legend2 = query("#bottom legend")[0];
                        domConstruct.destroy(legend1);
                        domConstruct.destroy(legend2);
                        for (var i = 0; i < legendspan.length; i++) {
                            domConstruct.destroy(legendspan[i])
                        };
                    }
                    
                });
                ready(function(){
                    parser.parse();
                });
            });
        </script>
    </head>
    <body class="claro">
        <div id="containerDiv">
        	<div id="header">
                <div id="title">
                     <b>Workshop Registration</b>
                </div>
                <div id="actionsDiv">
                    <ul id="actions"><span>More Actions</span>
                        
                    </ul>
                </div>
            </div>
            <form data-dojo-type="dijit/form/Form" id="myForm" action="">
                <span data-dojo-type="form"></span>
            </form>
        </div>
 	</body>

</html>